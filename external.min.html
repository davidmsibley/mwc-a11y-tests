<html>
    <head>
        <script src="https://unpkg.com/@webcomponents/webcomponentsjs@next/webcomponents-loader.js"></script>
        <style>
            body {
                padding: 0;
                margin: 0;
                background: #ccc;
            }
        </style>
        <link rel="stylesheet" href="demo/demo.css">
        <script type="module" src="./lib/myuw-app-bar/dist/external/myuw-app-bar.min.mjs"></script>
        <!-- <script type="module" src="./lib/myuw-app-bar/dist/bundle/myuw-app-bar.min.js"></script> -->
        <!-- <script type="module" src="./lib/myuw-app-bar/dist/poly/myuw-app-bar.min.js"></script> -->
        <link rel="import" href="lib/myuw-profile/myuw-profile.html">
        <link rel="import" href="lib/myuw-drawer/myuw-drawer.html">
        <link rel="import" href="lib/myuw-drawer/myuw-drawer-link.html">
        <link rel="import" href="lib/myuw-help/myuw-help.html">
        <script src="lib/myuw-app-styles/myuw-app-styles.js"></script>
        <script src="//khan.github.io/tota11y/tota11y/build/tota11y.min.js"></script>
    </head>
    <body>
        <myuw-app-bar
            theme-name="MyUW"
            theme-url="https://my.wisc.edu"
            app-name="Bucky Backup">
          <myuw-drawer slot="myuw-navigation">
            <myuw-drawer-link
              slot="myuw-drawer-links"
              name="MyUW home"
              icon="mail"
              href="http://google.com">
            </myuw-drawer-link>
          </myuw-drawer>
          <myuw-help slot="myuw-help">
          </myuw-help>
          <myuw-profile slot="myuw-profile" session-endpoint="lib/myuw-profile/session.json"></myuw-profile>
        </myuw-app-bar>
        <div class="demo__container">
            <div class="demo__test-content">
                <div class="demo__grid-box">
                    <form name="testPortalNameChange">
                        <label for="newPortalName">Update portal name:</label>
                        <input name="newPortalName" type="text" placeholder="New portal name"/>
                        <button onclick="testUpdate(event, 'theme-name',  newPortalName.value)">Update</button>
                    </form>
                </div>
                <div class="demo__grid-box">
                    <form name="testAppNameChange">
                        <label for="newAppName">Update app name:</label>
                        <input name="newAppName" type="text" placeholder="New app name"/>
                        <button onclick="testUpdate(event, 'app-name',  newAppName.value)">Update</button>
                    </form>
                </div>
                <div class="demo__grid-box">
                    <form name="testBackgroundChange">
                        <label for="newBackground">Update background color:</label>
                        <input name="newBackground" type="text" placeholder="rgb(33,150,243)"/>
                        <button onclick="testAddCss(event, 'myuw-app-bar-bg',  newBackground.value)">Update</button>
                    </form>
                </div>
                <div class="demo__grid-box">Box 4</div>
                <div class="demo__grid-box">Box 5</div>
                <div class="demo__grid-box">Box 6</div>
            </div>
        </div>
    </body>
    <script>
        /**
        *   Make sure component attributes are targetable
        *   and updatable from external JS
        *
        *   @param e {*} The event object
        *   @param attribute {String} The name of the attribute to target
        *   @param newValue {String} The new value to set
        */
        function testUpdate(e, attribute, newValue) {
            e.preventDefault();
            // Get app bar
            var _appBar = document.getElementsByTagName('myuw-app-bar')[0];
            _appBar.setAttribute(attribute, newValue);
        }

        /**
        *   Demonstrate how to update CSS properties programatically
        */
        function testAddCss(e, property, value) {
            e.preventDefault();
            var _newCss = document.createElement('style');
            _newCss.innerHTML = `
                myuw-app-bar {
                    --${property}: ${value};

                }
            `
            document.head.appendChild(_newCss);
        }
    </script>
</html>
